@{
    ViewData["Title"] = "Home Page";
}
@model Shashlik.RC.Models.EnvModel

<div>
    <p style="color:red">
        @ViewData["Errors"]
    </p>
    <form asp-action="Index" class="form-horizontal">
        <input type="hidden" name="Id" value="@(Model?.Id)" />
        @if (Model != null)
        {
            <div class="form-group">
                <label for="Name" class="col-sm-2 control-label"></label>
                <div class="col-sm-8">
                    <p>
                        <label>SecretKey</label>
                        <br />
                        <span id="keyshowspan">***</span>&nbsp;&nbsp;<a href="#" id="keyshow" key="@Model.Key">显示</a>&nbsp;&nbsp;<a asp-action="RefreshKey" asp-route-id="@(Model.Id)" class="confirm">刷新</a>

                        <script type="text/javascript">
                            $(function () {
                                $('#keyshow').click(function () {
                                    var key = $(this).attr('key');
                                    $('#keyshowspan').text(key);
                                    $(this).hide();
                                });
                            });
                        </script>
                    </p>
                </div>
            </div>
        }
        <div class="form-group">
            <label for="Name" class="col-sm-2 control-label">环境变量Name</label>
            <div class="col-sm-8">
                <input type="text" class="form-control" name="Name" id="Name" value="@(Model?.Name)" placeholder="环境变量">
            </div>
        </div>
        <div class="form-group">
            <label for="Desc" class="col-sm-2 control-label">描述</label>
            <div class="col-sm-8">
                <input type="text" class="form-control" name="Desc" id="Desc" value="@(Model?.Desc )" placeholder="描述">
            </div>
        </div>
        <div class="form-group">
            <label for="Password" class="col-sm-2 control-label">Ip白名单</label>
            <div class="col-sm-8">
                <textarea class="form-control" name="IpWhites" id="IpWhites" placeholder="Ip白名单, 可以使用 * 不限制 " rows="10">@(Model?.IpWhitesStr)</textarea>
            </div>
        </div>
        <div class="form-group">
            <div class="col-sm-offset-2 col-sm-10">
                <button type="submit" class="btn btn-primary confirm">保存</button>
                <a asp-action="Index" asp-controller="App">返回</a>
            </div>
        </div>
    </form>
</div>